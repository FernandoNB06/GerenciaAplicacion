<section class="planes">
  <div class="planes-header">
    <h2>Planes para Compradores</h2>
    <p>Elige el plan que mejor se adapte a tus necesidades de compra</p>
  </div>

  <div class="planes-container">
    <!-- Plan BÃ¡sico -->
    <div class="plan-card">
      <h3>BÃ¡sico</h3>
      <h1>Bs 0</h1>
      <ul>
        <li>âœ… Acceso libre al catÃ¡logo completo</li>
        <li>âœ… Compras seguras con garantÃ­a</li>
        <li>âœ… Soporte post venta vÃ­a WhatsApp</li>
        <li>âœ… PolÃ­ticas de devoluciÃ³n gratuita</li>
      </ul>
      <button class="btn-outline"
              (click)="abrirModal('BÃ¡sico','Bs 0','Acceso libre al catÃ¡logo completo')">
        Comenzar Gratis
      </button>
    </div>

    <!-- Plan Frecuente -->
    <div class="plan-card destacado">
      <h3>Frecuente</h3>
      <h1>Bs 25 <span>/mes</span></h1>
      <p class="nota">o Bs 250 al aÃ±o (2 meses gratis)</p>
      <div class="badge-descuento">Descuento en compras <strong>3%</strong></div>

      <ul>
        <li>âœ… 3% de descuento en todas las compras</li>
        <li>âœ… Acceso a combos especiales</li>
        <li>âœ… Ventas flash exclusivas</li>
        <li>âœ… EnvÃ­os con tarifa preferencial (Bs 10)</li>
        <li>âœ… AcumulaciÃ³n de puntos canjeables</li>
      </ul>
      <button class="btn-primary"
              (click)="abrirModal('Frecuente','Bs 25 /mes','Descuento del 3% y beneficios exclusivos')">
        Seleccionar Plan
      </button>
    </div>

    <!-- Plan Premium -->
    <div class="plan-card">
      <h3>Premium</h3>
      <h1>Bs 50 <span>/mes</span></h1>
      <p class="nota">o Bs 500 al aÃ±o (2 meses gratis)</p>
      <div class="badge-descuento premium">Descuento en compras <strong>10%</strong></div>

      <ul>
        <li>âœ… 10% de descuento en productos seleccionados</li>
        <li>âœ… EnvÃ­os gratuitos en Cercado</li>
        <li>âœ… Acceso anticipado a nuevos lanzamientos</li>
        <li>âœ… Experiencias culturales digitales exclusivas</li>
        <li>âœ… Soporte prioritario 24/7</li>
      </ul>
      <button class="btn-primary"
              (click)="abrirModal('Premium','Bs 50 /mes','Acceso anticipado y soporte prioritario')">
        Seleccionar Plan
      </button>
    </div>
  </div>
</section>

<!-- ========== MODAL LOGIN / REGISTRO ========== -->
<div class="modal-overlay" *ngIf="modalAbierto" (click)="cerrarModal()"></div>

<div class="modal" *ngIf="modalAbierto">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="cerrar" (click)="cerrarModal()">âœ•</button>

    <h2>Cuenta de Comprador</h2>
    <p class="sub">Accede a tu cuenta para disfrutar de beneficios exclusivos</p>

    <!-- ðŸ§¾ Info del plan seleccionado -->
    <div class="plan-resumen" *ngIf="planSeleccionado">
      <p><strong>Plan:</strong> {{ planSeleccionado.nombre }}</p>
      <p><strong>Precio:</strong> {{ planSeleccionado.precio }}</p>
      <p class="desc">{{ planSeleccionado.descripcion }}</p>
    </div>

    <div class="tabs">
      <button [class.active]="!modoRegistro" (click)="modoRegistro = false">Iniciar SesiÃ³n</button>
      <button [class.active]="modoRegistro" (click)="modoRegistro = true">Registrarse</button>
    </div>

    <!-- FORM LOGIN -->
    <form *ngIf="!modoRegistro && !suscripcionExitosa" class="form">
      <label>Correo ElectrÃ³nico</label>
      <input type="email" placeholder="tu@email.com" />
      <label>ContraseÃ±a</label>
      <input type="password" placeholder="********" />
      <button type="button" class="btn-primary" (click)="confirmarSuscripcion()">Iniciar SesiÃ³n</button>
      <p class="texto-cambio">
        Â¿No tienes cuenta?
        <span (click)="cambiarModo()">RegÃ­strate aquÃ­</span>
      </p>
    </form>

    <!-- FORM REGISTRO -->
    <form *ngIf="modoRegistro && !suscripcionExitosa" class="form">
      <label>Nombre Completo</label>
      <input type="text" placeholder="Tu nombre" />
      <label>Correo ElectrÃ³nico</label>
      <input type="email" placeholder="tu@email.com" />
      <label>ContraseÃ±a</label>
      <input type="password" placeholder="********" />
      <label>Confirmar ContraseÃ±a</label>
      <input type="password" placeholder="********" />
      <button type="button" class="btn-primary" (click)="confirmarSuscripcion()">Crear Cuenta</button>
      <p class="texto-cambio">
        Â¿Ya tienes cuenta?
        <span (click)="cambiarModo()">Inicia sesiÃ³n</span>
      </p>
    </form>

    <!-- âœ… MENSAJE DE Ã‰XITO -->
    <div class="exito" *ngIf="suscripcionExitosa">
      <div class="icono">âœ…</div>
      <h3>Â¡SuscripciÃ³n Exitosa!</h3>
      <p>Te has suscrito al plan <strong>{{ planSeleccionado?.nombre }}</strong>.</p>
      <p>Disfruta de tus beneficios exclusivos ðŸŽ‰</p>
    </div>
  </div>
</div>
